<h1>Recipe # <%= @recipe.id %></h1>
<h2>Preparation Time: <%= @recipe.preparation_time %> Hours</h2>
<h2>Public: <%= @recipe.public %></h2>
<h2>Cooking Time: <%= @recipe.cooking_time %> Hours</h2>
<p>Please follow these steps: <%= @recipe.description %></p>
<% if @recipe.user_id == current_user.id %>
  <a href="<%= recipe_foods_new_path %>">Add New Food</a>
  <a href="/general_shopping_list/<%= @recipe.id %>">Generate shopping list</a>
<% end %>
<table>
  <tr>
    <th>Food</th>
    <th>Quantity</th>
    <th>Value</th>
    <th>Actions</th>
  </tr>
  <% @recipe_foods.each do |food| %>
    <% if @recipe.id == food.recipe_id %>
    <tr>
      <td><%= Food.find_by_id(food.food_id).name %></td>
      <td><%= food.quantity %><%= Food.find_by_id(food.food_id).measurement_unit %></td>
      <td>$<%= food.quantity * Food.find_by_id(food.food_id).price %></td>
      <% if @recipe.user_id == current_user.id %>
        <td><%= button_to "Delete", delete_recipe_food_path, params: { food_id: food.food_id, recipe_id: food.recipe_id } , method: :post %></td>
      <% else %>
        <td><p>Only owner can delete this recipe food</p></td>
      <% end %>
    </tr>
    <% end %>
  <% end %>
</table>
